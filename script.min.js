import{initializeApp}from"https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";import{getFirestore,getDoc,doc,addDoc,updateDoc}from"https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";const QUOTATION_COLL="Quotations",SEEDED_DATA_COLL="Seeded_Data",GREETINGS_DOC_ID="Greetings_Doc",COMPLIMENTARY_DOC_ID="Complimentary_Doc",DELIVERABLES_DOC_ID="Deliverables",CUSTOM_HARD_DRIVES="Custom_Hard_Drives",TERMS_AND_CONDITIONS_DOC_ID="Terms_And_Conditions_Doc",CHARGES_DOC_ID="Charges_Doc";let db,title,events,totalCost,addGst,validUpTo,pwpsChange,preWeddingPhotoShoot,delChange,splitTeam,HD_Changed,HD_Count,HD_Size,WebLive_Changed,WebLive_Price,WebLive_Time,LED_Changed,LED_Price,droneRequired,del_photos,del_albums,del_films,del_long_videos,del_raw_data,del_reels,display_del_photos,display_del_albums,display_del_films,display_del_long_videos,display_del_raw_data,display_del_reels;const monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var a=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],b=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];function initDB(){const e=initializeApp({apiKey:"AIzaSyAIA7kvRB9QIovVY7JmYjvG4C8nCvEoCFQ",authDomain:"test-ddr.firebaseapp.com",projectId:"test-ddr",storageBucket:"test-ddr.firebasestorage.app",messagingSenderId:"295918037477",appId:"1:295918037477:web:eb751a64d1a81094ee670c"});db=getFirestore(e),fetchQuotation()}function sendWhatsAppMessage(){let e=`https://api.whatsapp.com/send?phone=918309939882&text=${encodeURIComponent("Hi, \n I am getting married. May I know the details ?")}`;window.open(e,"_blank")}function openInstagramProfile(){window.open("https://www.instagram.com/knotyweddings?igsh=MXA2a3A1bnpkMGhycw==","_blank")}function compareDateWithCurrent(e){let n=e.split("-"),t=parseInt(n[0],10),i=new Date(Date.parse(n[1]+" 1, 2000")).getMonth(),a=parseInt(n[2],10),o=new Date(a,i,t),s=new Date;return s.setHours(0,0,0,0),o>s?"Future date":o<s?"Expired":"Same as today"}async function fetchQuotation(){const e=new URLSearchParams(window.location.search).get("id").split(":::")[1];if(!e)return void(document.getElementById("details").innerHTML=t());const n=doc(db,"Quotations",e);try{const e=await getDoc(n);if(!e.exists())return void(document.getElementById("details").innerHTML=t());{const n=e.data();if(!n||"Expired"!=n.status&&"Expired"!=compareDateWithCurrent(n.validUpTo))if(n&&"Expired"!=n.status){title=n.title,totalCost=n.price,addGst=n.addGst,events=n.events,splitTeam=n.splitTeam,validUpTo=n.validUpTo,pwpsChange=n.pwpsChange,preWeddingPhotoShoot=n.preWeddingPhotoShoot,delChange=n.delChange,HD_Changed=n.HD_Changed,HD_Count=n.HD_Count,HD_Size=n.HD_Size,WebLive_Changed=n.WebLive_Changed,WebLive_Price=n.WebLive_Price,WebLive_Time=n.WebLive_Time,LED_Changed=n.LED_Changed,LED_Price=n.LED_Price,droneRequired=n.droneRequired,delChange&&(del_photos=n.del_photos,del_albums=n.del_albums,del_films=n.del_films,del_long_videos=n.del_long_videos,del_raw_data=n.del_raw_data,del_reels=n.del_reels,display_del_photos=n.display_del_photos,display_del_albums=n.display_del_albums,display_del_films=n.display_del_films,display_del_long_videos=n.display_del_long_videos,display_del_raw_data=n.display_del_raw_data,display_del_reels=n.display_del_reels);let e=getCompanyLogo();e+=await getGreetingsElement(),e+=await getEventsElemet(events),e+=await getComplimentaryElement(),e+=await getDeliverablesElement(),e+=await getPriceDetailsElement(),e+=await getHardDrivesElement(),e+=await getAdditionalServicesElement(),e+=await getTermsAndConditionsElement(),e+=`<div style="display: flex; flex-direction: column;padding: 20px 0px; z-index: 1; width: 100%; gap: 40px;">\n                <div\n                    style="display: flex; flex-direction: column; text-align: center; color: rgb(0, 0, 0); word-break: break-word;">\n                    <div style="height: 100%;">\n                        <div>\n                        <div style="display: flex; flex-direction: row; flex-wrap: wrap;  gap:20px; justify-content:center;">\n                        <i class="fa fa-whatsapp" style="color: rgb(209, 237, 57); cursor: pointer;font-size:60px;" onclick="sendWhatsAppMessage()"></i>\n                        <i class="fa fa-instagram" style="color: #d162bd; cursor: pointer; font-size:60px; color:red" onclick="openInstagramProfile()"></i>\n                        </div>   \n                        <p style="font-weight: 400; font-size: 22px;">\n                            <span style='font-size:22px;'>&#129309;</span>\n                            <span\n                                    style="color: rgb(242, 243, 237);">Congratulations,</span></p>\n                            <p style="font-family: Georgia, serif; font-weight: 400; font-size: 22px;">\n                            <span style='font-size:22px;'>&#128525;</span>\n                            <span style="color: rgb(242, 243, 237);">Knoty Weddings</span>\n                            <span style='font-size:22px;'>&#128525;</span></p>\n                            <p style="font-weight: 400; font-size: 22px;">\n                            <span style="color: rgb(242, 243, 237);">** This quotation is valid for 7 days (${validUpTo})**</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n    </div>\n</div>`,document.getElementById("details").innerHTML=e}else document.getElementById("details").textContent="Quotation not found.";else document.getElementById("details").innerHTML=getCompanyLogo()+'<div style="display: flex; flex-direction: column; flex-wrap: wrap; margin: 20px;  gap:20px"\n        <p style="font-family:cursive; font-size:28px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208); font-size: x-large;">❗❗❗ Quotation is Expired. Please contact us ❗❗❗ </span>\n        </p>\n        <i class="fa fa-whatsapp" style="display: flex; flex-direction: row; flex-wrap: wrap;  gap:20px; justify-content:center;  color: rgb(209, 237, 57); cursor: pointer;font-size:60px;" onclick="sendWhatsAppMessage()">\n        <p style="font-family:cursive; font-size:28px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208); font-size: x-large;">Contact us on Whatsapp </span>\n        </p> </i>\n        <i class="fa fa-instagram" style="display: flex; flex-direction: row; flex-wrap: wrap;  gap:20px; justify-content:center; color: #d162bd; cursor: pointer; font-size:60px; color:red" onclick="openInstagramProfile()">\n        <p style="font-family:cursive; font-size:28px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208); font-size: x-large;">Checkout our Instagram profile here </span>\n        </p></i>\n        </div>'}}catch(e){console.error("Error fetching document:",e)}function t(){return getCompanyLogo()+'<div style="display: flex; flex-direction: column; flex-wrap: wrap; margin: 20px;  gap:20px"\n        <p style="font-family:cursive; font-size:28px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208); font-size: x-large;">❗❗❗Something strange happened. Please contact us ❗❗❗ </span>\n        </p>\n        <i class="fa fa-whatsapp" style="display: flex; flex-direction: row; flex-wrap: wrap;  gap:20px; justify-content:center;  color: rgb(209, 237, 57); cursor: pointer;font-size:60px;" onclick="sendWhatsAppMessage()">\n        <p style="font-family:cursive; font-size:28px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208); font-size: x-large;">Contact us on Whatsapp </span>\n        </p> </i>\n        <i class="fa fa-instagram" style="display: flex; flex-direction: row; flex-wrap: wrap;  gap:20px; justify-content:center; color: #d162bd; cursor: pointer; font-size:60px; color:red" onclick="openInstagramProfile()">\n        <p style="font-family:cursive; font-size:28px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208); font-size: x-large;">Checkout our Instagram profile here </span>\n        </p></i>\n        </div> </div>'}}function getCompanyLogo(){return'<div style="font-family:auto; flex-direction: column; background-color: #0e323eed;">\n    <div style="text-align: center;">\n          <img src="logo1.png" alt="Company Logo"\n             style="margin-top:20px !important; width:80%"> \n </div>'}async function getDocumentData(e,n){const t=doc(db,e,n);try{const e=await getDoc(t);if(e.exists())return e.data()}catch(e){console.error("Error fetching document:",e)}}async function getGreetingsElement(){let e=` \x3c!--<div style="text-align: center;">\n       <p style="font-family: Ariel, sans-serif; font-size:80px; font-weight: 800; ">\n            <span style="color: rgb(231, 239, 208);">KNOTY WEDDINGS</span>\n        </p>\n             <img src="logo1.png" alt="Company Logo"\n                style="margin-top:20px !important; width:80%"> \n    </div>--\x3e\n    <div style=" text-align: center; color: rgb(0, 0, 0); word-break: break-word;">\n        <p style="font-size:25px; font-weight: 400; ">\n            <span style="color: rgb(231, 239, 208);">Dear ${title} ,</span>\n        </p>`;return(await getDocumentData("Seeded_Data","Greetings_Doc")).greetings.forEach((n=>{e+=`<p style="line-height: 1.5;">\n            <span style="font-size:20px; color: rgb(242, 243, 237);">${n}\n            </span>\n        </p>`})),e+="</div>",e}async function getEventsElemet(){let e='<div style=" text-align: center; color: rgb(0, 0, 0); word-break: break-word;">\n        <p\n            style="font-weight: 400; font-size: 40px; ">\n            <span style="color: rgb(231, 239, 208);">\n                Events\n            </span>\n        </p>\n    </div>\n\n        <div style="justify-content: center;display: flex;  flex-direction : row; flex-wrap: wrap;">';return events.forEach((n=>{let t;if("TBD"!=n.date){const[e,i,a]=n.date.split("-");t=e+"-"+monthNames[parseInt(i,10)-1]+"-"+a}else t=n.date;e+=`\n            <li style="list-style-type:none">\n                <div\n                    style=" display: inline-block; background-color: #134251; min-height: 116px; width: 300px; padding: 15px; margin:5px; border-radius: 15px;">\n                    <div>\n                        <span>&#128198;</span>\n                        <span style="color: rgb(242, 243, 237);">${t}</span>\n                        <span>&nbsp;</span>\n                        <span>&nbsp;</span>\n                        <span>&nbsp;</span>\n                        <span>&#128205;</span>\n                        <span style="color: rgb(242, 243, 237);">${n.location}</span>\n                    </div>\n                    <div\n                        style="color: rgb(242, 243, 237); display: flex; gap: 20px; flex-flow: wrap; max-width: 748px; justify-content: flex-start; padding-top: 15px; font-weight: 1000">\n                        ${n.name}\n                    </div>`,splitTeam?(n.cinematographers&&"0"!=n.cinematographers&&(e+=` <div\n                                        style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                                        <span>&#127909;</span> \n                                         ${n.cinematographers} Cinematographers\n                                    </div>`),n.candidPhotographers&&"0"!=n.candidPhotographers&&(e+=` <div\n                                        style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                                        <span>&#128247;</span> \n                                         ${n.candidPhotographers} Candid Photographers\n                                    </div>`),n.traditionalVideographers&&"0"!=n.traditionalVideographers&&(e+=` <div\n                                        style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                                        <span>&#127909;</span> \n                                         ${n.traditionalVideographers} Traditional Videographer\n                                    </div>`),n.traditionalPhotographers&&"0"!=n.traditionalPhotographers&&(e+=` <div\n                                        style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                                        <span>&#128247;</span> \n                                         ${n.traditionalPhotographers} Traditional Photographer\n                                    </div>`)):(n.photographers&&"0"!=n.photographers&&(e+=` <div\n                                        style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                                        <span>&#128247;</span> \n                                            ${n.photographers} Photographers\n                                    </div>`),n.videographers&&"0"!=n.videographers&&(e+=`  <div\n                            style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                            <span>&#127909;</span>\n                            ${n.videographers} Videographers\n                        </div>`)),n.eventDetails&&null!=n.eventDetails&&(e+=` <div\n                        style="text-align: left; color: rgb(242, 243, 237); text-transform: capitalize; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; padding-top: 10px;">\n                         ${n.eventDetails} \n                    </div>`),e+='     \n                </div>\n                <div class="desc" style="color: rgb(242, 243, 237);">\n                </div>\n            </li> '})),e+="</div>",e}async function getComplimentaryElement(){let e='<div style="display: flex; justify-content: center; width: 100%; padding: 20px 0px;">\n            <div style="text-align : center; background-color: #134251; padding:15px; margin:30px; border-radius:30px" >\n            <div style="font-weight: 400; font-size: 40px;color: rgb(231, 239, 208);">\n                Complimentary</div>\n        <div>';return(await getDocumentData("Seeded_Data","Complimentary_Doc")).complimentary.forEach((n=>{pwpsChange&&n.startsWith("Pre-Wedding")&&!preWeddingPhotoShoot.includes("Pre-Wedding")&&(n="Pre-Wedding Photoshoot:::"+preWeddingPhotoShoot),!droneRequired&&n.includes("Drone")&&(n="");let t=n.split(":::"),i=0;t.forEach((n=>{e+=0==i?`<p><span style="font-size: 20px;"><strong\n                                                style="font-size:20px;color: rgb(231, 239, 208);">${n}</strong>\n                        </span></p>`:`<p><span style="font-size: 20px; color: rgb(242, 243, 237);">\n                ${n}\n                </span></p>`,i+=1}))})),e+="</div>\n    </div> </div>",e}async function getDeliverablesElement(){let e='<div style="text-align : center;">\n        <p style="font-weight: 400; font-size: 40px;">\n            <span style="color: rgb(231, 239, 208);">\n            <span>&#10003;</span>\n            Deliverables</span>\n        </p>\n    </div>\n    <div style="display: flex; flex-direction: column; gap: 40px; width: 100%; justify-content: center; align-items: center; z-index: 1;">\n    <div style="max-width: 720px; width: 100%; gap: 16px;">',n=[];const t=await getDocumentData("Seeded_Data","Deliverables");return delChange?(display_del_photos&&(del_photos?n.push(del_photos):n.push(t.photos)),display_del_albums&&(del_albums?n.push(del_albums):n.push(t.albums)),display_del_films&&(del_films?n.push(del_films):n.push(t.film)),display_del_long_videos&&(del_long_videos?n.push(del_long_videos):n.push(t.long_video)),display_del_reels&&(del_reels?n.push(del_reels):n.push(t.reels)),display_del_raw_data&&(del_raw_data?n.push(del_raw_data):n.push(t.raw_data))):n=[t.photos,t.albums,t.film,t.long_video,t.raw_data],n.forEach((n=>{let t=n.split(":::");e+='<div style="display: flex; width: 100%; background-color: #134251; position: relative; border-radius: 30px; margin-bottom:16px">\n                <div style="display: flex; flex-direction: column; width: 100%; padding: 16px; padding: 16px;">\n                    <div style="height: fit-content;">',t.length>1&&(e+=`<a style="display: flex;">\n                        <div>\n                            <p>\n                                <span style="font-size: 17px;">\n                                    <strong style="color: rgb(231, 239, 208);">${t[1]}</strong>\n                                </span>\n                            </p>\n                        </div>\n                    </a>`),e+=`<span style="display: flex; margin-bottom: 5px; text-align: left">\n                        <p>\n                            <span style="font-size:20px; color: rgb(242, 243, 237);">\n                            <span>&#128262;</span>\n                            ${t[0]}</span>&nbsp;\n                        </p>\n                    </span>\n                </div>\n            </div>\n        </div>`})),e+="</div>\n    </div>",e}function inWords(e){if((e=e.toString()).length>9)return"overflow";var n=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(n){var t="";return t+=0!=n[1]?(a[Number(n[1])]||b[n[1][0]]+" "+a[n[1][1]])+"Crore ":"",t+=0!=n[2]?(a[Number(n[2])]||b[n[2][0]]+" "+a[n[2][1]])+"Lakh ":"",t+=0!=n[3]?(a[Number(n[3])]||b[n[3][0]]+" "+a[n[3][1]])+"Thousand ":"",t+=0!=n[4]?(a[Number(n[4])]||b[n[4][0]]+" "+a[n[4][1]])+"Hundred ":"",t+=0!=n[5]?(""!=t?"And ":"")+(a[Number(n[5])]||b[n[5][0]]+" "+a[n[5][1]])+"Only ":""}}async function getPriceDetailsElement(){const e=inWords(totalCost);let n=`<div style="display: flex; justify-content: center; width: 100%; padding: 20px 0px;">\n        <div style="display: flex; justify-content: center; padding: 20px 0px; background-color: #134251; padding: 30px; margin: 30px; border-radius: 30px;">\n    <div\n        style="display: flex; flex-direction: column; text-align: center; word-break: break-word;">\n        <div>\n        <p style="line-height: 1.2;">\n            <span\n                    style="color: rgb(231, 239, 208); font-size: 36px;">Charges</span>\n            </p>\n            <p style="line-height: 1.2;"><span\n                    style="color: rgb(242, 243, 237); font-size: 36px;">₹&nbsp;<span\n                        style="border-bottom:none; border:none; background:none;">${totalCost}</span></span>\n            </p>\n            <p style="line-height: 1.2;"><span\n                        style="color: rgb(242, 243, 237); font-size: 18px; border-bottom:none; border:none; background:none;">( ${e} Rupees )</span>\n            </p>`;const t=await getDocumentData("Seeded_Data","Charges_Doc");let i=0;return t.charge.forEach((e=>{(0!=i||addGst||"true"==addGst)&&(n+=`<p>\n            <span style="color: rgb(242, 243, 237); font-size: 20px;">\n            ${e}\n            </span>\n        </p>`),i+=1})),n+="</div> </div> </div> </div>",n}async function getHardDrivesElement(){let e='<div style="display: flex; justify-content: center; width: 100%; padding: 20px 0px;">';HD_Changed||(HD_Count=2,HD_Size=6);let n=(await getDocumentData("Seeded_Data",CUSTOM_HARD_DRIVES)).custom_hard_drives;const t=n.split(":::")[0];let i=n.split(":::")[1];return i=i.replace("HD_Count",HD_Count),i=i.replace("HD_Size",HD_Size),e+=`<div style="display: flex; flex-direction: column; background-color: #134251; padding: 30px; border-radius: 30px; text-align: center; word-break: break-word;">\n                    <div>\n                        <p>\n                            <span style="color: rgb(231, 239, 208); font-size: 36px;">\n                            ${t}</span>\n                        </p>\n                        <p style="text-align: center;">\n                            <span style="color: rgb(242, 243, 237); font-size: 20px;">\n                             ${i}\n                            </span>\n                        </p>\n                    </div>\n            </div>`,e+="</div>",e}async function getAdditionalServicesElement(){return`<div style="display: flex; justify-content: center; width: 100%; padding: 20px 0px;">\n                <div style="display: flex; justify-content: center; padding: 20px 0px; background-color: #134251; margin: 30px; border-radius: 30px;">\n                <div\n                    style="display: flex; flex-direction: column; text-align: center; word-break: break-word; width : 60%;">\n                    <div>\n                        <p style="text-align: center;">\n                        <span\n                                style="color: rgb(231, 239, 208); font-size: 36px;">Additional\n                                Services</span></p>\n                        <p style="text-align: center;"><span style="font-size: 20px;">\n                                <br> <span style="color: rgb(242, 243, 237);">Add-on services provided by our\n                                    partner&nbsp;vendor,&nbsp;&nbsp;that can greatly enhance your event\n                                    experience.</span></span></p>\n                        \n                        <p style="text-align: center;"><span\n                                style="color: rgb(242, 243, 237); font-size: 20px;"><strong>LED\n                                    Screens</strong> </span></p>\n                        \n                        <p style="text-align: center;"><span\n                                style="color: rgb(242, 243, 237); font-size: 20px;">💲\n                                Charges : ₹&nbsp;&nbsp;${LED_Changed?LED_Price:"20,000"}&nbsp;per LED Screen</span></p>\n                        <p style="text-align: center;"><span\n                                style="color: rgb(242, 243, 237); font-size: 20px;">\n                                <br> <strong>Web Live</strong> </span></p>\n                        \n                        <p style="text-align: center;"><span\n                                style="color: rgb(242, 243, 237); font-size: 20px;">💲\n                                Charges : ₹&nbsp;&nbsp;${WebLive_Changed?WebLive_Price:"15,000"}&nbsp;per session (&nbsp;${WebLive_Changed?WebLive_Time:5}&nbsp;hours&nbsp;)</span></p>\n                    </div>\n                </div>\n            </div> </div>\n`}async function getTermsAndConditionsElement(){let e='<div style="display: flex; justify-content: center; width: 100%; padding: 20px 0px;">\n        <div style="display: flex; justify-content: center; padding: 20px 0px; background-color: #134251; margin: 30px; border-radius: 30px;">\n            <div\n            style="display: flex; flex-direction: column; text-align: center">\n                <div>\n                    <p>\n                    <span style="font-size: 36px; color: rgb(231, 239, 208);">Terms\n                            and Conditions<br></span></p>\n                </div>\n            <div\n                style="display: flex; flex-direction: column; text-align: center;">\n                <div>';const n=await getDocumentData("Seeded_Data","Terms_And_Conditions_Doc");let t=1;return n.terms_and_conditions.forEach((n=>{e+=`<p style="text-align: left; margin:30px">\n            <span style=" color: rgb(242, 243, 237);">\n            ${t}. ${n}\n            </span>\n        </p>`,t+=1})),e+="</div> </div> </div></div></div>",e}window.sendWhatsAppMessage=sendWhatsAppMessage,window.openInstagramProfile=openInstagramProfile,document.addEventListener("contextmenu",(e=>e.preventDefault())),document.addEventListener("keydown",(e=>{(123===e.keyCode||e.ctrlKey&&e.shiftKey&&("I"===e.key||"J"===e.key)||e.ctrlKey&&"U"===e.key)&&e.preventDefault()})),initDB();